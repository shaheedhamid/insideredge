<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Insider Radar — Institutional Buying Intelligence</title>
  <meta name="description" content="Track real-time SEC Form 4 insider purchases. Spot cluster buys, filter by role, and follow smart money." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    /* ================================================================== */
    /* RESET & TOKENS                                                       */
    /* ================================================================== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:            #0e1627;
      --bg2:           #111b30;
      --surface:       #162038;
      --surface2:      #1b2845;
      --surface3:      #203050;
      --border:        #2a3f60;
      --border2:       #344d75;

      --gold:          #c9a84c;
      --gold-bright:   #e8c96d;
      --gold-dim:      #7a6228;
      --gold-bg:       rgba(201,168,76,.1);
      --gold-glow:     rgba(201,168,76,.2);

      --text:          #dde5f6;
      --text2:         #b0bcd8;
      --muted:         #6b80a0;
      --muted2:        #96aac8;

      --green:         #0ecba0;
      --green-dim:     #0a9476;
      --green-bg:      rgba(14,203,160,.1);

      --blue:          #4a9eff;
      --blue-bg:       rgba(74,158,255,.1);

      --orange:        #ff6b35;
      --orange-bg:     rgba(255,107,53,.12);

      --purple:        #9b7cff;
      --purple-bg:     rgba(155,124,255,.1);

      --radius:        8px;
      --radius-lg:     12px;
      --shadow:        0 8px 40px rgba(0,0,0,.7);
      --shadow-sm:     0 2px 10px rgba(0,0,0,.5);
      --font-mono:     'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      font-size: 14px;
      line-height: 1.5;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    a { color: var(--gold); text-decoration: none; }
    a:hover { color: var(--gold-bright); }

    /* ================================================================== */
    /* TOPBAR — announcement strip                                          */
    /* ================================================================== */
    .topbar {
      background: linear-gradient(90deg, var(--gold-dim) 0%, #8a6228 50%, var(--gold-dim) 100%);
      text-align: center;
      padding: 7px 24px;
      font-size: 12px;
      font-weight: 500;
      color: #f0dea0;
      letter-spacing: .03em;
      border-bottom: 1px solid var(--gold-dim);
    }

    .topbar strong { color: #fff; }

    /* ================================================================== */
    /* HEADER                                                               */
    /* ================================================================== */
    header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      position: sticky;
      top: 0;
      z-index: 200;
      height: 64px;
      box-shadow: 0 1px 0 var(--border), var(--shadow);
    }

    /* -- brand --------------------------------------------------------- */
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    .brand-logo {
      width: 36px;
      height: 36px;
      color: var(--gold);
      flex-shrink: 0;
    }

    .brand-text { display: flex; flex-direction: column; gap: 1px; }

    .brand-name {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: -.02em;
      background: linear-gradient(135deg, var(--gold-bright) 0%, var(--gold) 60%, #a07828 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.1;
    }

    .brand-tagline {
      font-size: 10px;
      font-weight: 500;
      color: var(--muted2);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    /* -- header center ------------------------------------------------- */
    .header-center {
      display: flex;
      align-items: center;
      gap: 20px;
      flex: 1;
      justify-content: center;
    }

    .live-pill {
      display: flex;
      align-items: center;
      gap: 6px;
      background: var(--surface2);
      border: 1px solid var(--border2);
      border-radius: 20px;
      padding: 4px 12px 4px 8px;
      font-size: 11px;
      font-weight: 600;
      color: var(--text2);
      letter-spacing: .04em;
    }

    .live-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--green);
      box-shadow: 0 0 8px var(--green);
      flex-shrink: 0;
    }

    .live-dot.loading {
      background: var(--gold);
      box-shadow: 0 0 8px var(--gold);
      animation: pulse 1.2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50%       { opacity: .4; transform: scale(.85); }
    }

    #last-updated {
      font-size: 11px;
      color: var(--muted);
      display: none;
    }

    @media (min-width: 900px) { #last-updated { display: block; } }

    /* -- header right -------------------------------------------------- */
    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    #trade-count {
      font-size: 11px;
      font-weight: 600;
      font-family: var(--font-mono);
      background: var(--gold-bg);
      border: 1px solid var(--gold-dim);
      border-radius: 20px;
      padding: 4px 12px;
      color: var(--gold);
      letter-spacing: .04em;
    }

    .btn-pro {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--gold) 0%, #a87828 100%);
      color: #0c0d0f;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: .04em;
      padding: 7px 16px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      transition: opacity .15s, transform .1s;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .btn-pro:hover {
      opacity: .9;
      transform: translateY(-1px);
      color: #0c0d0f;
    }

    /* ================================================================== */
    /* DIVIDER LINE                                                         */
    /* ================================================================== */
    .gold-rule {
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, var(--gold-dim) 30%, var(--gold) 50%, var(--gold-dim) 70%, transparent 100%);
      opacity: .5;
    }

    /* ================================================================== */
    /* STATS                                                                */
    /* ================================================================== */
    .stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1px;
      background: var(--border);
      border-bottom: 1px solid var(--border);
    }

    .stat-card {
      background: var(--surface);
      padding: 18px 24px;
      position: relative;
      overflow: hidden;
      transition: background .15s;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
    }

    .stat-card:nth-child(1)::before { background: linear-gradient(90deg, var(--blue), transparent); }
    .stat-card:nth-child(2)::before { background: linear-gradient(90deg, var(--orange), transparent); }
    .stat-card:nth-child(3)::before { background: linear-gradient(90deg, var(--green), transparent); }
    .stat-card:nth-child(4)::before { background: linear-gradient(90deg, var(--gold), transparent); }

    .stat-card:hover { background: var(--surface2); }

    .stat-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .stat-icon {
      width: 28px;
      height: 28px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .stat-icon svg { width: 14px; height: 14px; }

    .stat-card:nth-child(1) .stat-icon { background: var(--blue-bg);   color: var(--blue);   }
    .stat-card:nth-child(2) .stat-icon { background: var(--orange-bg); color: var(--orange); }
    .stat-card:nth-child(3) .stat-icon { background: var(--green-bg);  color: var(--green);  }
    .stat-card:nth-child(4) .stat-icon { background: var(--gold-bg);   color: var(--gold);   }

    .stat-label {
      font-size: 10px;
      font-weight: 600;
      color: var(--muted2);
      letter-spacing: .08em;
      text-transform: uppercase;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: -.03em;
      line-height: 1;
      font-family: var(--font-mono);
    }

    .stat-value.accent { color: var(--blue);   }
    .stat-value.orange { color: var(--orange); }
    .stat-value.green  { color: var(--green);  }
    .stat-value.gold   { color: var(--gold);   }

    /* ================================================================== */
    /* ERROR BANNER                                                         */
    /* ================================================================== */
    #error-banner {
      display: none;
      background: rgba(239,68,68,.12);
      border-left: 3px solid #ef4444;
      color: #fca5a5;
      padding: 12px 24px;
      font-size: 13px;
    }

    /* ================================================================== */
    /* FILTERS                                                              */
    /* ================================================================== */
    .filters-wrap {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 12px 32px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      position: sticky;
      top: 64px;        /* sits flush below the 64px sticky header */
      z-index: 190;
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--muted2);
      letter-spacing: .06em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    /* search */
    .search-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }

    .search-icon {
      position: absolute;
      left: 10px;
      color: var(--muted);
      pointer-events: none;
      width: 14px;
      height: 14px;
    }

    #search-input {
      width: 220px;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: var(--radius);
      padding: 7px 10px 7px 32px;
      font-size: 13px;
      font-family: inherit;
      outline: none;
      transition: border-color .2s, background .2s;
    }

    #search-input::placeholder { color: var(--muted); }

    #search-input:focus {
      border-color: var(--gold-dim);
      background: var(--surface3);
    }

    /* select */
    .select-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }

    .select-chevron {
      position: absolute;
      right: 9px;
      color: var(--muted);
      pointer-events: none;
      width: 12px;
      height: 12px;
    }

    #title-filter {
      -webkit-appearance: none;
      appearance: none;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: var(--radius);
      padding: 7px 30px 7px 10px;
      font-size: 13px;
      font-family: inherit;
      outline: none;
      cursor: pointer;
      transition: border-color .2s;
    }

    #title-filter:focus { border-color: var(--gold-dim); }
    #title-filter option { background: var(--surface2); color: var(--text); }

    /* value slider */
    .slider-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100px;
      height: 3px;
      background: var(--border2);
      border-radius: 2px;
      outline: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: var(--gold);
      box-shadow: 0 0 6px var(--gold-glow);
      cursor: pointer;
      transition: transform .1s;
    }

    input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.2); }

    #min-value-label {
      font-size: 12px;
      font-weight: 600;
      font-family: var(--font-mono);
      color: var(--gold);
      min-width: 52px;
    }

    /* reset btn */
    .btn-reset {
      margin-left: auto;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted2);
      border-radius: var(--radius);
      padding: 6px 14px;
      font-size: 12px;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all .2s;
      letter-spacing: .02em;
    }

    .btn-reset:hover {
      border-color: var(--gold-dim);
      color: var(--gold);
      background: var(--gold-bg);
    }

    /* ================================================================== */
    /* TABLE SECTION                                                        */
    /* ================================================================== */
    .table-section {
      padding: 0;
    }

    .table-scroll {
      overflow-x: auto;
    }

    #no-results {
      display: none;
      text-align: center;
      padding: 80px 24px;
      color: var(--muted);
    }

    .no-results-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto 16px;
      opacity: .3;
    }

    #no-results p {
      font-size: 15px;
      font-weight: 500;
    }

    /* ------------------------------------------------------------------ */
    /* Table core                                                           */
    /* ------------------------------------------------------------------ */
    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 900px;
    }

    /* sticky header */
    thead {
      /* NOT sticky — position:sticky breaks inside overflow-x:auto containers */
    }

    thead tr {
      background: var(--surface2);
      border-bottom: 2px solid var(--border2);
    }

    th {
      padding: 11px 16px;
      text-align: left;
      font-size: 10px;
      font-weight: 700;
      color: var(--muted2);
      text-transform: uppercase;
      letter-spacing: .1em;
      white-space: nowrap;
      cursor: pointer;
      user-select: none;
      transition: color .15s;
    }

    th:hover { color: var(--gold); }

    th .sort-arrow { margin-left: 3px; opacity: .35; font-style: normal; }
    th.sort-asc  .sort-arrow::after  { content: " ▲"; opacity: 1; color: var(--gold); }
    th.sort-desc .sort-arrow::after { content: " ▼"; opacity: 1; color: var(--gold); }
    th:not(.sort-asc):not(.sort-desc) .sort-arrow::after { content: " ⇅"; }

    /* body rows */
    tbody tr {
      border-bottom: 1px solid rgba(28,42,69,.7);
      transition: background .12s;
    }

    tbody tr:last-child { border-bottom: none; }

    tbody tr:not(.child-row):hover { background: var(--surface2); }

    /* role rows */
    tbody tr.row-ceo { background: rgba(14,203,160,.05); }
    tbody tr.row-ceo:hover { background: rgba(14,203,160,.1); }
    tbody tr.row-vp  { background: rgba(201,168,76,.04); }
    tbody tr.row-vp:hover { background: rgba(201,168,76,.09); }

    td {
      padding: 11px 16px;
      font-size: 13px;
      white-space: nowrap;
      vertical-align: middle;
    }

    /* ------------------------------------------------------------------ */
    /* TD variants                                                          */
    /* ------------------------------------------------------------------ */
    .td-date {
      font-size: 12px;
      font-family: var(--font-mono);
      color: var(--muted2);
      letter-spacing: .02em;
    }

    .td-ticker {
      font-size: 14px;
      font-weight: 700;
      font-family: var(--font-mono);
      color: var(--gold-bright);
      letter-spacing: .05em;
    }

    .td-company {
      max-width: 200px;
      overflow: hidden;
      text-overflow: ellipsis;
      color: var(--text2);
    }

    .td-value {
      font-weight: 700;
      font-family: var(--font-mono);
      color: var(--green);
      font-size: 13px;
    }

    .td-num {
      font-family: var(--font-mono);
      color: var(--text2);
      font-size: 12px;
    }

    /* ------------------------------------------------------------------ */
    /* Group / expand rows                                                  */
    /* ------------------------------------------------------------------ */
    .expand-arrow {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 4px;
      background: var(--surface3);
      border: 1px solid var(--border2);
      font-size: 8px;
      color: var(--gold-dim);
      cursor: pointer;
      vertical-align: middle;
      transition: all .15s;
      user-select: none;
      margin-right: 4px;
    }

    .group-row:hover .expand-arrow {
      background: var(--gold-bg);
      border-color: var(--gold-dim);
      color: var(--gold);
    }

    .group-row td { font-weight: 600; }

    .group-insiders {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 11px;
      font-weight: 600;
      color: var(--muted2);
      background: var(--surface3);
      border: 1px solid var(--border2);
      border-radius: 20px;
      padding: 2px 10px;
    }

    /* child rows */
    .child-row {
      background: rgba(255,255,255,.018) !important;
    }

    .child-row:hover { background: rgba(255,255,255,.04) !important; }
    .child-row.row-ceo { background: rgba(14,203,160,.035) !important; }
    .child-row.row-vp  { background: rgba(201,168,76,.03) !important;  }

    .child-row td:first-child {
      border-left: 2px solid var(--border2);
    }

    .child-row .td-ticker {
      color: var(--muted2);
      font-weight: 400;
      padding-left: 28px;
    }

    /* ------------------------------------------------------------------ */
    /* Badges                                                               */
    /* ------------------------------------------------------------------ */
    .badge-cluster {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      background: var(--orange-bg);
      color: var(--orange);
      border: 1px solid rgba(255,107,53,.3);
      border-radius: 6px;
      padding: 3px 9px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: .05em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .badge-title {
      display: inline-block;
      border-radius: 5px;
      padding: 2px 8px;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: .04em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .badge-title.ceo-chair { background: var(--green-bg);  color: var(--green);  border: 1px solid rgba(14,203,160,.2); }
    .badge-title.vp        { background: var(--gold-bg);   color: var(--gold);   border: 1px solid rgba(201,168,76,.2); }
    .badge-title.dir       { background: var(--blue-bg);   color: var(--blue);   border: 1px solid rgba(74,158,255,.2); }
    .badge-title.other     { background: var(--surface3);  color: var(--muted2); border: 1px solid var(--border2);       }

    /* ------------------------------------------------------------------ */
    /* Loading skeleton                                                     */
    /* ------------------------------------------------------------------ */
    .skeleton-row td { padding: 14px 16px; }

    .skeleton-cell {
      height: 13px;
      border-radius: 4px;
      background: linear-gradient(90deg, var(--surface2) 25%, var(--surface3) 50%, var(--surface2) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.6s ease-in-out infinite;
    }

    @keyframes shimmer {
      0%   { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* ================================================================== */
    /* FOOTER                                                               */
    /* ================================================================== */
    footer {
      border-top: 1px solid var(--border);
      background: var(--surface);
      padding: 28px 32px;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 0;
    }

    .footer-brand .brand-name-sm {
      font-size: 15px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--gold-bright), var(--gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 4px;
    }

    .footer-brand p {
      font-size: 11px;
      color: var(--muted);
      max-width: 280px;
      line-height: 1.6;
    }

    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .footer-links a {
      font-size: 12px;
      color: var(--muted2);
      transition: color .15s;
    }

    .footer-links a:hover { color: var(--gold); }

    .footer-legal {
      font-size: 11px;
      color: var(--muted);
      text-align: right;
      max-width: 280px;
      line-height: 1.7;
    }

    @media (max-width: 768px) {
      .footer-legal { text-align: left; }
    }

    /* ================================================================== */
    /* RESPONSIVE                                                           */
    /* ================================================================== */
    @media (max-width: 900px) {
      .topbar { display: none; }
      header { padding: 0 16px; }
      .header-center { display: none; }
      .brand-tagline { display: none; }
      .stats { grid-template-columns: repeat(2, 1fr); }
      .filters-wrap { padding: 12px 16px; }
      #search-input { width: 160px; }
      footer { padding: 20px 16px; }
    }

    @media (max-width: 560px) {
      .stats { grid-template-columns: repeat(2, 1fr); }
      .stat-value { font-size: 22px; }
      header { height: 56px; }
      .filters-wrap { top: 56px; }
    }
  </style>
</head>
<body>


<!-- ================================================================== -->
<!-- HEADER                                                               -->
<!-- ================================================================== -->
<header>
  <div class="brand">
    <!-- radar SVG logo -->
    <svg class="brand-logo" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle cx="18" cy="18" r="16" stroke="currentColor" stroke-width="1.2" opacity=".2"/>
      <circle cx="18" cy="18" r="11" stroke="currentColor" stroke-width="1.2" opacity=".4"/>
      <circle cx="18" cy="18" r="6"  stroke="currentColor" stroke-width="1.2" opacity=".7"/>
      <circle cx="18" cy="18" r="2.5" fill="currentColor"/>
      <line x1="18" y1="18" x2="31" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity=".8"/>
      <circle cx="31" cy="5" r="1.8" fill="currentColor" opacity=".9"/>
    </svg>
    <div class="brand-text">
      <div class="brand-name">Insider Radar</div>
      <div class="brand-tagline">Institutional Buying Intelligence</div>
    </div>
  </div>

  <div class="header-center">
    <div class="live-pill">
      <span class="live-dot" id="refresh-dot"></span>
      LIVE
    </div>
    <span id="last-updated">Loading…</span>
  </div>

  <div class="header-right">
    <span id="trade-count">— trades</span>
  </div>
</header>

<div class="gold-rule"></div>

<!-- ================================================================== -->
<!-- ERROR BANNER                                                         -->
<!-- ================================================================== -->
<div id="error-banner"></div>

<!-- ================================================================== -->
<!-- STATS                                                                -->
<!-- ================================================================== -->
<div class="stats" id="stats-bar">

  <div class="stat-card">
    <div class="stat-header">
      <div class="stat-icon">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <path d="M2 12L6 7l3 3 5-6"/>
        </svg>
      </div>
      <div class="stat-label">Visible Trades</div>
    </div>
    <div class="stat-value accent" id="stat-visible">—</div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <div class="stat-icon">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <circle cx="8" cy="8" r="5"/>
          <path d="M8 5v3l2 2"/>
        </svg>
      </div>
      <div class="stat-label">Cluster Buys</div>
    </div>
    <div class="stat-value orange" id="stat-clusters">—</div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <div class="stat-icon">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <line x1="8" y1="2" x2="8" y2="14"/>
          <path d="M5 5h4.5a2.5 2.5 0 010 5H5"/>
          <path d="M5 10h5"/>
        </svg>
      </div>
      <div class="stat-label">Total Value</div>
    </div>
    <div class="stat-value green" id="stat-total-value">—</div>
  </div>

  <div class="stat-card">
    <div class="stat-header">
      <div class="stat-icon">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <rect x="2" y="9" width="3" height="5" rx="1"/>
          <rect x="6.5" y="5" width="3" height="9" rx="1"/>
          <rect x="11" y="2" width="3" height="12" rx="1"/>
        </svg>
      </div>
      <div class="stat-label">Unique Tickers</div>
    </div>
    <div class="stat-value gold" id="stat-tickers">—</div>
  </div>

</div>

<!-- ================================================================== -->
<!-- FILTERS                                                              -->
<!-- ================================================================== -->
<div class="filters-wrap">

  <div class="filter-group">
    <div class="search-wrap">
      <svg class="search-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <circle cx="6.5" cy="6.5" r="4.5"/>
        <line x1="10" y1="10" x2="14" y2="14"/>
      </svg>
      <input type="text" id="search-input" placeholder="Ticker or company…" />
    </div>
  </div>

  <div class="filter-group">
    <span class="filter-label">Title</span>
    <div class="select-wrap">
      <select id="title-filter">
        <option value="all">All Titles</option>
        <option value="ceo">CEO / President</option>
        <option value="director">Director / Chairman</option>
        <option value="vp">VP / SVP / EVP</option>
        <option value="cfo">CFO</option>
        <option value="other">Other</option>
      </select>
      <svg class="select-chevron" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <path d="M2 4l4 4 4-4"/>
      </svg>
    </div>
  </div>

  <div class="filter-group">
    <span class="filter-label">Min Value</span>
    <div class="slider-group">
      <input type="range" id="min-value-slider" min="0" max="11" step="1" value="0" />
      <span id="min-value-label">All</span>
    </div>
  </div>

  <button class="btn-reset" id="btn-reset">↺ Reset</button>
</div>

<!-- ================================================================== -->
<!-- TABLE                                                                -->
<!-- ================================================================== -->
<div class="table-section">

  <div id="no-results">
    <svg class="no-results-icon" viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
      <circle cx="20" cy="20" r="14"/>
      <line x1="30" y1="30" x2="42" y2="42"/>
      <line x1="14" y1="20" x2="26" y2="20"/>
    </svg>
    <p>No trades match your filters.</p>
  </div>

  <div class="table-scroll">
    <table id="trades-table">
      <thead>
        <tr>
          <th data-col="filing_date">Date<i class="sort-arrow"></i></th>
          <th data-col="ticker">Ticker<i class="sort-arrow"></i></th>
          <th data-col="company">Company<i class="sort-arrow"></i></th>
          <th data-col="insider_name">Insider<i class="sort-arrow"></i></th>
          <th data-col="title">Role<i class="sort-arrow"></i></th>
          <th data-col="value" class="sort-desc">Trade Value<i class="sort-arrow"></i></th>
          <th data-col="qty">Shares<i class="sort-arrow"></i></th>
          <th data-col="price">Price<i class="sort-arrow"></i></th>
          <th data-col="cluster_buy">Signal<i class="sort-arrow"></i></th>
        </tr>
      </thead>
      <tbody id="table-body">
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:100%"></div></td></tr>
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:92%"></div></td></tr>
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:96%"></div></td></tr>
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:85%"></div></td></tr>
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:90%"></div></td></tr>
        <tr class="skeleton-row"><td colspan="9"><div class="skeleton-cell" style="width:78%"></div></td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ================================================================== */
<!-- FOOTER                                                               -->
<!-- ================================================================== -->
<footer>
  <div class="footer-brand">
    <div class="brand-name-sm">Insider Radar</div>
    <p>Real-time SEC Form 4 open-market purchase tracking. Cluster buy detection for institutional-grade signal quality.</p>
  </div>

  <div class="footer-links">
    <a href="http://openinsider.com" target="_blank" rel="noopener">Data: OpenInsider</a>
    <a href="https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&type=4&dateb=&owner=include&count=40" target="_blank" rel="noopener">SEC EDGAR Form 4</a>
  </div>

  <div class="footer-legal">
    &copy; 2025 Insider Radar. All rights reserved.<br/>
    <span style="color:var(--muted)">For informational purposes only. Not financial advice.<br/>
    Insider trading data sourced from public SEC filings.</span>
  </div>
</footer>

<!-- ================================================================== -->
<!-- JAVASCRIPT — logic unchanged, only presentation updated             -->
<!-- ================================================================== -->
<script>
(function () {
  'use strict';

  /* ------------------------------------------------------------------ */
  /* State                                                                */
  /* ------------------------------------------------------------------ */
  const DATA_URL = 'data/latest.json';
  const REFRESH_INTERVAL_MS = 30 * 60 * 1000;

  const VALUE_STEPS = [
    0, 100_000, 250_000, 500_000, 1_000_000, 2_500_000,
    5_000_000, 10_000_000, 25_000_000, 50_000_000, 100_000_000, 500_000_000,
  ];

  let allTrades       = [];
  let sortCol         = 'value';
  let sortDir         = 'desc';
  let expandedTickers = new Set();

  /* ------------------------------------------------------------------ */
  /* DOM refs                                                              */
  /* ------------------------------------------------------------------ */
  const lastUpdatedEl  = document.getElementById('last-updated');
  const tradeCountEl   = document.getElementById('trade-count');
  const refreshDotEl   = document.getElementById('refresh-dot');
  const errorBannerEl  = document.getElementById('error-banner');
  const tableBodyEl    = document.getElementById('table-body');
  const noResultsEl    = document.getElementById('no-results');
  const searchInputEl  = document.getElementById('search-input');
  const titleFilterEl  = document.getElementById('title-filter');
  const minValueSlider = document.getElementById('min-value-slider');
  const minValueLabel  = document.getElementById('min-value-label');
  const btnReset       = document.getElementById('btn-reset');
  const tableEl        = document.getElementById('trades-table');

  const statVisible    = document.getElementById('stat-visible');
  const statClusters   = document.getElementById('stat-clusters');
  const statTotalValue = document.getElementById('stat-total-value');
  const statTickers    = document.getElementById('stat-tickers');

  /* ------------------------------------------------------------------ */
  /* Utilities                                                             */
  /* ------------------------------------------------------------------ */
  function parseNumber(v) {
    if (v === null || v === undefined || v === '') return 0;
    const s = String(v).replace(/[$,\s%+]/g, '');
    const n = parseFloat(s);
    return isNaN(n) ? 0 : n;
  }

  function formatCurrency(n) {
    if (n === 0) return '—';
    if (n >= 1_000_000_000) return '$' + (n / 1_000_000_000).toFixed(2) + 'B';
    if (n >= 1_000_000)     return '$' + (n / 1_000_000).toFixed(1) + 'M';
    if (n >= 1_000)         return '$' + (n / 1_000).toFixed(0) + 'K';
    return '$' + n.toFixed(0);
  }

  function formatShares(n) {
    if (n === 0) return '—';
    if (n >= 1_000_000) return (n / 1_000_000).toFixed(2) + 'M';
    if (n >= 1_000)     return (n / 1_000).toFixed(1) + 'K';
    return n.toLocaleString();
  }

  function sliderLabel(idx) {
    return idx === 0 ? 'All' : formatCurrency(VALUE_STEPS[idx]);
  }

  /* ------------------------------------------------------------------ */
  /* Title classification                                                  */
  /* ------------------------------------------------------------------ */
  function classifyTitle(title) {
    const t = (title || '').toLowerCase();
    if (/\b(ceo|chief executive|president)\b/.test(t))            return 'ceo';
    if (/\b(chair|chairman|chairwoman|director|board)\b/.test(t)) return 'director';
    if (/\b(cfo|chief financial)\b/.test(t))                      return 'cfo';
    if (/\b([se]vp|svp|evp|vp|vice president)\b/.test(t))        return 'vp';
    return 'other';
  }

  function titleBadge(title) {
    const cls = classifyTitle(title);
    const cssClasses = { ceo: 'ceo-chair', director: 'dir', cfo: 'vp', vp: 'vp', other: 'other' };
    const display = title.length > 22 ? title.substring(0, 22) + '…' : title;
    return `<span class="badge-title ${cssClasses[cls]}" title="${escHtml(title)}">${escHtml(display)}</span>`;
  }

  function escHtml(str) {
    return String(str)
      .replace(/&/g, '&amp;').replace(/</g, '&lt;')
      .replace(/>/g, '&gt;').replace(/"/g, '&quot;');
  }

  /* ------------------------------------------------------------------ */
  /* Row classification                                                    */
  /* ------------------------------------------------------------------ */
  function rowClass(trade) {
    const cls = classifyTitle(trade.title || '');
    if (cls === 'ceo' || cls === 'director') return 'row-ceo';
    if (cls === 'vp' || cls === 'cfo')       return 'row-vp';
    return '';
  }

  /* ------------------------------------------------------------------ */
  /* Filtering                                                             */
  /* ------------------------------------------------------------------ */
  function getFilters() {
    return {
      search:   searchInputEl.value.trim().toLowerCase(),
      title:    titleFilterEl.value,
      minValue: VALUE_STEPS[parseInt(minValueSlider.value, 10)],
    };
  }

  function applyFilters(trades) {
    const { search, title, minValue } = getFilters();
    return trades.filter(t => {
      if (parseNumber(t.value) < minValue) return false;
      if (title !== 'all' && classifyTitle(t.title) !== title) return false;
      if (search) {
        const hay = ((t.ticker || '') + ' ' + (t.company || '')).toLowerCase();
        if (!hay.includes(search)) return false;
      }
      return true;
    });
  }

  /* ------------------------------------------------------------------ */
  /* Sorting                                                               */
  /* ------------------------------------------------------------------ */
  function sortTrades(trades) {
    return [...trades].sort((a, b) => {
      let av = a[sortCol], bv = b[sortCol];
      if (['value','qty','price'].includes(sortCol)) { av = parseNumber(av); bv = parseNumber(bv); }
      if (sortCol === 'cluster_buy') { av = av ? 1 : 0; bv = bv ? 1 : 0; }
      if (av < bv) return sortDir === 'asc' ? -1 : 1;
      if (av > bv) return sortDir === 'asc' ? 1 : -1;
      return 0;
    });
  }

  /* ------------------------------------------------------------------ */
  /* Group helpers                                                         */
  /* ------------------------------------------------------------------ */
  function getSortVal(trades) {
    if (['value','qty','price'].includes(sortCol))
      return trades.reduce((s, t) => s + parseNumber(t[sortCol]), 0);
    if (sortCol === 'cluster_buy')
      return trades.some(t => t.cluster_buy) ? 1 : 0;
    return trades.reduce((best, t) => { const v = String(t[sortCol]||''); return v>best?v:best; }, '');
  }

  function bestRowClass(trades) {
    const cs = trades.map(t => rowClass(t));
    if (cs.includes('row-ceo')) return 'row-ceo';
    if (cs.includes('row-vp'))  return 'row-vp';
    return '';
  }

  /* ------------------------------------------------------------------ */
  /* Render                                                                */
  /* ------------------------------------------------------------------ */
  function renderTable() {
    const filtered = applyFilters(allTrades);

    const totalValue    = filtered.reduce((s, t) => s + parseNumber(t.value), 0);
    const clusterCount  = filtered.filter(t => t.cluster_buy).length;
    const uniqueTickers = new Set(filtered.map(t => t.ticker)).size;

    statVisible.textContent    = filtered.length.toLocaleString();
    statClusters.textContent   = clusterCount.toLocaleString();
    statTotalValue.textContent = formatCurrency(totalValue);
    statTickers.textContent    = uniqueTickers.toLocaleString();

    if (filtered.length === 0) {
      tableBodyEl.innerHTML = '';
      noResultsEl.style.display = 'block';
      return;
    }
    noResultsEl.style.display = 'none';

    // Group by ticker
    const groupMap = new Map();
    filtered.forEach(t => {
      if (!groupMap.has(t.ticker)) groupMap.set(t.ticker, []);
      groupMap.get(t.ticker).push(t);
    });

    let groups = Array.from(groupMap.values()).map(trades => ({
      ticker:     trades[0].ticker,
      company:    trades[0].company,
      totalValue: trades.reduce((s, t) => s + parseNumber(t.value), 0),
      totalQty:   trades.reduce((s, t) => s + parseNumber(t.qty), 0),
      clusterBuy: trades.some(t => t.cluster_buy),
      count:      trades.length,
      trades:     sortTrades(trades),
      sortVal:    getSortVal(trades),
    }));

    groups.sort((a, b) => {
      if (a.sortVal < b.sortVal) return sortDir === 'asc' ? -1 : 1;
      if (a.sortVal > b.sortVal) return sortDir === 'asc' ? 1 : -1;
      return 0;
    });

    const clusterBadgeHTML = '<span class="badge-cluster">&#9650; Cluster</span>';
    const rows = [];

    groups.forEach(g => {
      const isExpanded   = expandedTickers.has(g.ticker);
      const multi        = g.count > 1;
      const rc           = bestRowClass(g.trades);
      const clusterBadge = g.clusterBuy ? clusterBadgeHTML : '';

      if (multi) {
        const latestDate = g.trades.reduce((m, t) => (t.filing_date > m ? t.filing_date : m), '');
        const arrow = isExpanded ? '&#9660;' : '&#9654;';
        rows.push(`<tr class="group-row ${rc}" data-ticker="${escHtml(g.ticker)}" style="cursor:pointer">
          <td class="td-date">${escHtml(latestDate)}</td>
          <td class="td-ticker"><span class="expand-arrow">${arrow}</span>${escHtml(g.ticker)}</td>
          <td class="td-company" title="${escHtml(g.company)}">${escHtml(g.company)}</td>
          <td><span class="group-insiders">${g.count} insiders</span></td>
          <td>—</td>
          <td class="td-value">${formatCurrency(g.totalValue)}</td>
          <td class="td-num">${formatShares(g.totalQty)}</td>
          <td>—</td>
          <td>${clusterBadge}</td>
        </tr>`);

        if (isExpanded) {
          g.trades.forEach(t => {
            const val   = parseNumber(t.value);
            const qty   = parseNumber(t.qty);
            const price = parseNumber(t.price);
            const trc   = rowClass(t);
            rows.push(`<tr class="child-row ${trc}">
              <td class="td-date">${escHtml(t.filing_date || '—')}</td>
              <td class="td-ticker">&nbsp;&nbsp;${escHtml(t.ticker || '—')}</td>
              <td class="td-company" title="${escHtml(t.company || '')}">${escHtml(t.company || '—')}</td>
              <td>${escHtml(t.insider_name || '—')}</td>
              <td>${titleBadge(t.title || 'Unknown')}</td>
              <td class="td-value">${formatCurrency(val)}</td>
              <td class="td-num">${formatShares(qty)}</td>
              <td class="td-num">${price > 0 ? '$' + price.toFixed(2) : '—'}</td>
              <td>${t.cluster_buy ? clusterBadgeHTML : ''}</td>
            </tr>`);
          });
        }
      } else {
        const t     = g.trades[0];
        const val   = parseNumber(t.value);
        const qty   = parseNumber(t.qty);
        const price = parseNumber(t.price);
        rows.push(`<tr class="${rc}">
          <td class="td-date">${escHtml(t.filing_date || '—')}</td>
          <td class="td-ticker">${escHtml(t.ticker || '—')}</td>
          <td class="td-company" title="${escHtml(t.company || '')}">${escHtml(t.company || '—')}</td>
          <td>${escHtml(t.insider_name || '—')}</td>
          <td>${titleBadge(t.title || 'Unknown')}</td>
          <td class="td-value">${formatCurrency(val)}</td>
          <td class="td-num">${formatShares(qty)}</td>
          <td class="td-num">${price > 0 ? '$' + price.toFixed(2) : '—'}</td>
          <td>${t.cluster_buy ? clusterBadgeHTML : ''}</td>
        </tr>`);
      }
    });

    tableBodyEl.innerHTML = rows.join('');

    tableBodyEl.querySelectorAll('tr.group-row').forEach(row => {
      row.addEventListener('click', () => {
        const ticker = row.dataset.ticker;
        if (expandedTickers.has(ticker)) expandedTickers.delete(ticker);
        else expandedTickers.add(ticker);
        renderTable();
      });
    });
  }

  /* ------------------------------------------------------------------ */
  /* Sort header clicks                                                    */
  /* ------------------------------------------------------------------ */
  tableEl.querySelectorAll('th[data-col]').forEach(th => {
    th.addEventListener('click', () => {
      const col = th.dataset.col;
      if (col === sortCol) sortDir = sortDir === 'asc' ? 'desc' : 'asc';
      else { sortCol = col; sortDir = 'desc'; }
      tableEl.querySelectorAll('th').forEach(h => h.classList.remove('sort-asc', 'sort-desc'));
      th.classList.add(sortDir === 'asc' ? 'sort-asc' : 'sort-desc');
      renderTable();
    });
  });

  (function () {
    const initTh = tableEl.querySelector(`th[data-col="${sortCol}"]`);
    if (initTh) initTh.classList.add('sort-desc');
  })();

  /* ------------------------------------------------------------------ */
  /* Filter events                                                         */
  /* ------------------------------------------------------------------ */
  searchInputEl.addEventListener('input', () => renderTable());
  titleFilterEl.addEventListener('change', () => renderTable());
  minValueSlider.addEventListener('input', () => {
    minValueLabel.textContent = sliderLabel(parseInt(minValueSlider.value, 10));
    renderTable();
  });
  btnReset.addEventListener('click', () => {
    searchInputEl.value        = '';
    titleFilterEl.value        = 'all';
    minValueSlider.value       = 0;
    minValueLabel.textContent  = sliderLabel(0);
    renderTable();
  });

  /* ------------------------------------------------------------------ */
  /* Data fetching                                                         */
  /* ------------------------------------------------------------------ */
  function showError(msg) {
    errorBannerEl.textContent = msg;
    errorBannerEl.style.display = 'block';
  }
  function hideError() { errorBannerEl.style.display = 'none'; }

  function setLoading(on) {
    if (on) refreshDotEl.classList.add('loading');
    else    refreshDotEl.classList.remove('loading');
  }

  function formatTimestamp(isoStr) {
    if (!isoStr) return '';
    try {
      const d = new Date(isoStr);
      return 'Updated ' + d.toLocaleString(undefined, {
        month: 'short', day: 'numeric', year: 'numeric',
        hour: '2-digit', minute: '2-digit', timeZoneName: 'short',
      });
    } catch { return isoStr; }
  }

  async function fetchData() {
    setLoading(true);
    try {
      const resp = await fetch(DATA_URL + '?_=' + Date.now());
      if (!resp.ok) throw new Error(`HTTP ${resp.status}: ${resp.statusText}`);
      const json = await resp.json();

      allTrades = json.trades || [];
      const count = json.trade_count || allTrades.length;

      lastUpdatedEl.textContent = formatTimestamp(json.last_updated);
      tradeCountEl.textContent  = count.toLocaleString() + ' trades';

      hideError();
      renderTable();
    } catch (err) {
      showError('Could not load data: ' + err.message + '. Run the scraper to populate data.');
      if (allTrades.length === 0) {
        tableBodyEl.innerHTML = `
          <tr><td colspan="9" style="text-align:center;padding:60px;color:var(--muted)">
            No data available. Run the scraper first.
          </td></tr>`;
      }
    } finally {
      setLoading(false);
    }
  }

  /* ------------------------------------------------------------------ */
  /* Bootstrap                                                             */
  /* ------------------------------------------------------------------ */
  fetchData();
  setInterval(fetchData, REFRESH_INTERVAL_MS);
})();
</script>

</body>
</html>
